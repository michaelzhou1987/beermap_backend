(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{139:function(e,n,t){e.exports={"loading-wrapper":"loading_loading-wrapper__1lQ68","loading-text":"loading_loading-text__1dPC_"}},190:function(e,n,t){e.exports=t(343)},195:function(e,n,t){},199:function(e,n,t){},27:function(e,n,t){e.exports={"header-wrapper":"navbar_header-wrapper__3X9n4","nav-bar-wrapper":"navbar_nav-bar-wrapper__26HM1","nav-bar":"navbar_nav-bar__2P5gV","nav-bar-menu":"navbar_nav-bar-menu__1UBlr",isLogin:"navbar_isLogin__2rrbq","welcome-msg":"navbar_welcome-msg__lQUIX","welcome-msg-text":"navbar_welcome-msg-text__2rfa0","sign-out":"navbar_sign-out__3qaNS"}},343:function(e,n,t){"use strict";t.r(n);var a=t(7),r=t.n(a),i=(t(195),t(185)),o=t(0),c=t.n(o),l=t(55),s=t(50),u=t(64),m=t(37),d=t(75),p=t(56),h=t(182),b=t(82),g=t.n(b),f=t(76),v=t(73),E=t.n(v),w=t(91),k=t(59),y=t(60),O=t(62),j=t(61),I=t(63),S=(t(199),t(200),t(348)),_=t(344),N=t(347),x=t(12),P=t(349),L=t(41),B=t(92),C=N.a.create({name:"normal_login"})(function(e){var n=e.form.getFieldDecorator;return c.a.createElement(N.a,{onSubmit:function(n){n.preventDefault(),e.form.validateFields(function(){var n=Object(w.a)(E.a.mark(function n(t,a){var r;return E.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t){n.next=9;break}return console.log(a),n.next=4,e.LOGIN({variables:{email:a.username,pwd:a.password,rememberMe:a.remember}});case 4:if(r=n.sent){n.next=7;break}return n.abrupt("return");case 7:window.localStorage.setItem("beermapAuth",r.data.login.token),e.onSignin();case 9:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}())},className:"login-form"},c.a.createElement(N.a.Item,null,n("username",{rules:[{required:!0,message:"Please input your username!"}]})(c.a.createElement(_.a,{prefix:c.a.createElement(x.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Username"}))),c.a.createElement(N.a.Item,null,n("password",{rules:[{required:!0,message:"Please input your Password!"}]})(c.a.createElement(_.a.Password,{prefix:c.a.createElement(x.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password"}))),c.a.createElement(N.a.Item,null,n("remember",{valuePropName:"checked",initialValue:!0})(c.a.createElement(P.a,null,"Remember me")),c.a.createElement("a",{className:"login-form-forgot",href:"javascript:viod(0);",style:{float:"right"}},"Forgot password"),c.a.createElement("div",null,c.a.createElement(L.a,{type:"primary",htmlType:"submit",className:"login-form-button",style:{width:"100%"}},"Log in")),"Or"," ",c.a.createElement("a",{href:"javascript:void(0);",onClick:function(n){e.closePopup()}},"register now!")))}),M=Object(u.c)(B.e,{name:"LOGIN"})(C),$=t(27),A=t.n($),U=function(e){function n(e){var t;return Object(k.a)(this,n),(t=Object(O.a)(this,Object(j.a)(n).call(this,e))).showModal=function(){t.setState({visible:!0})},t.handleOk=function(){t.setState({ModalText:"The modal will be closed after two seconds",confirmLoading:!0}),setTimeout(function(){t.setState({visible:!1,confirmLoading:!1})},2e3)},t.handleCancel=function(){console.log("Clicked cancel button"),t.setState({visible:!1})},t.state={isSignInProcess:!0,ModalText:"Content of the modal",visible:!1,confirmLoading:!1},t}return Object(I.a)(n,e),Object(y.a)(n,[{key:"handleRegistration",value:function(){this.handleCancel(),this.props.history.push("/registration")}},{key:"handleSignin",value:function(){this.setState({visible:!1}),this.props.onSignin(),this.props.history.push("/home")}},{key:"handleSignOut",value:function(){window.localStorage.setItem("beermapAuth",""),this.props.onSignout()}},{key:"toggleRegister",value:function(){this.setState({isSignInProcess:!1})}},{key:"toggleSignIn",value:function(){this.setState({isSignInProcess:!0})}},{key:"render",value:function(){var e=this,n=this.state,t=n.visible,a=n.confirmLoading,r=n.ModalText;return c.a.createElement("header",{className:A.a["header-wrapper"]},c.a.createElement("nav",{className:A.a["nav-bar-wrapper"]},c.a.createElement("ul",{className:A.a["nav-bar"]},c.a.createElement("li",{className:A.a["nav-bar-menu"]},"Beer Map"),c.a.createElement("li",{className:A.a["nav-bar-menu"]},c.a.createElement(l.b,{exact:!0,activeClassName:"is-active",to:"/home"},"Home")),c.a.createElement("li",{className:A.a["nav-bar-menu"]},c.a.createElement(l.b,{exact:!0,activeClassName:"is-active",to:"/beers"},"My Beers")),c.a.createElement("li",{className:"".concat(A.a["nav-bar-menu"]+" "+A.a.isLogin),style:{marginLeft:"auto"}},this.props.isLogInUser?[c.a.createElement("span",{key:"welcome",className:A.a["welcome-msg"]},c.a.createElement("span",{className:A.a["welcome-msg-text"]},"Welcome,\xa0"),this.props.nickname),c.a.createElement("span",{key:"sign-out",className:A.a["sign-out"],onClick:function(n){return e.handleSignOut(n)}},"Sign Out")]:c.a.createElement("a",{className:A.a["sign-out"],href:"javascript:void(0)",onClick:this.showModal},"Sign in/Register")))),c.a.createElement(S.a,{title:"Title",visible:t,onOk:this.handleOk,confirmLoading:a,onCancel:this.handleCancel,footer:null},c.a.createElement("p",null,r),c.a.createElement("div",{style:{display:this.state.isSignInProcess?"":"none"}},c.a.createElement(M,{closePopup:function(n){e.handleRegistration(n)},onSignin:function(n){e.handleSignin(n)}})),c.a.createElement("div",{className:A.a.register,style:{display:this.state.isSignInProcess?"none":""}},c.a.createElement("div",{style:{marginBottom:16}},c.a.createElement(_.a,{placeholder:"Email"})),c.a.createElement("div",{style:{marginBottom:16}},c.a.createElement(_.a.Password,{placeholder:"Password"})),c.a.createElement("div",{style:{marginBottom:16}},c.a.createElement(_.a.Password,{placeholder:"Confirm password"})),c.a.createElement("a",{href:"javascript:void(0)",onClick:function(n){return e.toggleSignIn(n)}},"Already have an account? Sign in instead."))))}}]),n}(c.a.Component),T=t(346),q=function(e){function n(e){var t;return Object(k.a)(this,n),(t=Object(O.a)(this,Object(j.a)(n).call(this,e))).state={isLogInUser:!1,nickname:"",role:""},t}return Object(I.a)(n,e),Object(y.a)(n,[{key:"goBack",value:function(){this.props.history.go(-1)}},{key:"getAuth",value:function(){var e=Object(w.a)(E.a.mark(function e(){var n;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.AUTH({variables:{check:1}});case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,this.setState({isLogInUser:!0,nickname:n.data.checkAuth.nickname,role:n.data.checkAuth.role});case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"app-root"},c.a.createElement(s.b,{render:function(n){return c.a.createElement(U,Object.assign({},n,{isLogInUser:e.state.isLogInUser,nickname:e.state.nickname,onSignout:function(n){e.setState({isLogInUser:!1,nickname:"",role:""})},onSignin:e.getAuth.bind(e)}))}}),c.a.createElement(T.a,{onBack:function(n){return e.goBack(n)},title:"page title"}),c.a.createElement("div",{className:"app-content"},this.props.children))}},{key:"componentWillMount",value:function(){this.getAuth()}},{key:"componentDidMount",value:function(){}}]),n}(o.Component),H=Object(u.c)(B.a,{name:"AUTH"})(q),R=t(350),W=t(351);var D=g()({loader:function(){return t.e(11).then(t.bind(null,401))},loading:f.a}),F=g()({loader:function(){return Promise.all([t.e(4),t.e(7)]).then(t.bind(null,402))},loading:f.a}),G=g()({loader:function(){return t.e(9).then(t.bind(null,403))},loading:f.a}),J=g()({loader:function(){return Promise.all([t.e(0),t.e(5),t.e(6)]).then(t.bind(null,404))},loading:f.a}),Q=g()({loader:function(){return Promise.all([t.e(0),t.e(8),t.e(10)]).then(t.bind(null,405))},loading:f.a}),V=Object(d.b)({uri:"/graphql"}),X=Object(h.a)(function(e,n){var t=n.headers,a=localStorage.getItem("beermapAuth");return{headers:Object(i.a)({},t,{Authorization:a?"Bearer ".concat(a):""})}}),z=new m.a({link:X.concat(V),cache:new p.a}),K=c.a.createElement(u.a,{client:z},c.a.createElement(l.a,null,c.a.createElement(s.b,{render:function(e){return c.a.createElement(H,e,c.a.createElement(R.a,null,c.a.createElement(W.a,{key:e.location.key,timeout:{enter:1e3,exit:0},classNames:"fade"},c.a.createElement(s.d,null,c.a.createElement(s.b,{path:"/home",render:function(e){return c.a.createElement(D,Object.assign({},e,{title:"Home Page"}))}}),c.a.createElement(s.b,{path:"/beers",render:function(e){return c.a.createElement(F,Object.assign({},e,{title:"My Beers"}))}}),c.a.createElement(s.b,{path:"/beerdetail/:id",render:function(e){return c.a.createElement(G,e)}}),c.a.createElement(s.b,{path:"/addbeer",render:function(e){return c.a.createElement(J,e)}}),c.a.createElement(s.b,{path:"/registration",render:function(e){return c.a.createElement(Q,e)}}),c.a.createElement(s.a,{from:"/",to:"/home",exact:!0}),c.a.createElement(s.a,{from:"*",to:"/home",exact:!0})))))}})));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(K,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},76:function(e,n,t){"use strict";var a=t(59),r=t(60),i=t(62),o=t(61),c=t(63),l=t(0),s=t.n(l),u=t(139),m=t.n(u),d=function(e){function n(){return Object(a.a)(this,n),Object(i.a)(this,Object(o.a)(n).apply(this,arguments))}return Object(c.a)(n,e),Object(r.a)(n,[{key:"render",value:function(){return s.a.createElement("div",{className:m.a["loading-wrapper"]},s.a.createElement("strong",{className:m.a["loading-text"]},"Loading..."),s.a.createElement("div",{className:"spinner-border",role:"status","aria-hidden":"true"}))}}]),n}(l.Component);n.a=d},92:function(e,n,t){"use strict";t.d(n,"d",function(){return u}),t.d(n,"e",function(){return m}),t.d(n,"a",function(){return d}),t.d(n,"c",function(){return p}),t.d(n,"b",function(){return h});var a=t(70),r=t(72);function i(){var e=Object(a.a)(["\n  mutation(\n    $beerInput: BeerInput\n    ) {\n    createBeer (beerInput: $beerInput){\n      _id,\n      name\n    }\n  }\n"]);return i=function(){return e},e}function o(){var e=Object(a.a)(["\n  mutation($breweryInput: BreweryInput) {\n    createBrewery (breweryInput: $breweryInput){\n      _id,\n      name\n    }\n  }\n"]);return o=function(){return e},e}function c(){var e=Object(a.a)(["\n  mutation($check: Int!) {\n    checkAuth(check: $check) {\n      nickname,\n      role\n    }\n  }\n"]);return c=function(){return e},e}function l(){var e=Object(a.a)(["\n  mutation ($email: String!, $pwd: String!, $rememberMe: Boolean!) {\n    login(email: $email, pwd: $pwd, rememberMe: $rememberMe) {\n      token\n    }\n  }\n"]);return l=function(){return e},e}function s(){var e=Object(a.a)(["\n  mutation(\n    $userInput: UserInput\n  ) {\n    createUser(\n      userInput: $userInput\n    ) {\n      email\n      pwd\n      nickname\n      firstName\n      lastName\n      phoneNumber\n      _id\n    }\n  }\n"]);return s=function(){return e},e}var u=Object(r.a)(s()),m=Object(r.a)(l()),d=Object(r.a)(c()),p=Object(r.a)(o()),h=Object(r.a)(i())}},[[190,2,3]]]);
//# sourceMappingURL=main.f528ed0f.chunk.js.map